# Google OAuth 앱 인증 가이드

"Google이 인증하지 않은 앱입니다" 경고를 제거하고 신뢰할 수 있는 앱으로 등록하는 방법입니다.

---

## 1. 왜 이 경고가 나타나나요?

Google OAuth를 사용하는 앱은 기본적으로 **"테스트 모드"**로 작동합니다.
- 테스트 모드에서는 최대 100명까지만 로그인 가능
- "이 앱은 Google에서 인증하지 않았습니다" 경고 표시
- 외부 사용자가 로그인할 때마다 경고 화면이 나타남

**프로덕션 모드**로 전환하려면 Google의 검토와 승인이 필요합니다.

---

## 2. 인증 신청 준비사항

### 2.1 필수 준비물
- [ ] Google Cloud Console 프로젝트 설정 완료
- [ ] OAuth 동의 화면 구성 완료
- [ ] 개인정보 처리방침 페이지 URL
- [ ] 서비스 약관 페이지 URL
- [ ] 앱 홈페이지 URL
- [ ] 앱 로고 (120x120px 이상)

### 2.2 개인정보 처리방침 및 약관 페이지
Google은 **실제로 접근 가능한 공개 URL**을 요구합니다.

현재 프로젝트에 이미 다음 페이지가 있습니다:
- `/privacy-policy` - 개인정보 처리방침
- `/terms-of-service` - 서비스 약관

실제 URL:
- https://yeyak-mania.vercel.app/privacy-policy
- https://yeyak-mania.vercel.app/terms-of-service

---

## 3. Google Cloud Console 설정

### Step 1: OAuth 동의 화면 설정
1. [Google Cloud Console](https://console.cloud.google.com/) 접속
2. 프로젝트 선택 (현재 OAuth 클라이언트가 있는 프로젝트)
3. **왼쪽 메뉴 → "API 및 서비스" → "OAuth 동의 화면"** 클릭

### Step 2: 앱 정보 입력
다음 정보를 정확히 입력:

#### 기본 정보
- **앱 이름**: `예약매니아` (또는 원하는 서비스명)
- **사용자 지원 이메일**: 본인 Gmail 주소
- **앱 로고**: 120x120px 이상 이미지 업로드 (선택사항)

#### 앱 도메인
- **앱 홈페이지**: `https://yeyak-mania.vercel.app`
- **개인정보 처리방침**: `https://yeyak-mania.vercel.app/privacy-policy`
- **서비스 약관**: `https://yeyak-mania.vercel.app/terms-of-service`

#### 승인된 도메인
- `vercel.app` 추가

#### 개발자 연락처 정보
- 본인 이메일 주소 입력

### Step 3: 범위(Scopes) 설정
현재 사용 중인 범위:
- `https://www.googleapis.com/auth/userinfo.email`
- `https://www.googleapis.com/auth/userinfo.profile`
- `https://www.googleapis.com/auth/calendar`
- `https://www.googleapis.com/auth/calendar.events`

**민감한 범위 사용 여부**:
- `calendar` 관련 범위는 **민감한 범위**에 해당
- Google의 추가 검토가 필요할 수 있음

### Step 4: 테스트 사용자 추가 (임시 해결책)
검토 기간 동안 테스트 사용자로 등록된 계정은 경고 없이 로그인 가능:

1. OAuth 동의 화면 → **"테스트 사용자"** 섹션
2. **"+ ADD USERS"** 클릭
3. 허용할 Gmail 주소 입력 (최대 100개)
4. 저장

**이 방법의 한계**:
- 등록된 사용자만 경고 없이 로그인 가능
- 일반 사용자는 여전히 경고 표시됨

---

## 4. 프로덕션 인증 신청

### Step 1: 인증 요청 제출
1. OAuth 동의 화면 → 상단의 **"앱 게시"** 버튼 클릭
2. **"확인 요청"** 클릭
3. Google의 검토 프로세스 시작

### Step 2: 추가 정보 제공 (민감한 범위 사용 시)
Google Calendar API와 같은 민감한 범위를 사용하는 경우:

1. **앱 설명 작성**:
   ```
   예약매니아는 강사와 수강생을 위한 스마트 예약 관리 시스템입니다.
   Google Calendar API를 사용하여 다음 기능을 제공합니다:

   - 강사가 자신의 Google Calendar와 연동하여 수업 일정 관리
   - 수강생이 예약한 수업을 강사의 캘린더에 자동 등록
   - 일정 변경/취소 시 캘린더 자동 업데이트

   Calendar API는 강사의 동의 하에 강사 본인의 캘린더에만 접근하며,
   다른 사용자의 캘린더 정보에는 접근하지 않습니다.
   ```

2. **YouTube 동영상 제출 (필수)**:
   - 앱의 OAuth 흐름을 보여주는 데모 영상
   - 어떻게 Calendar API를 사용하는지 시연
   - 2-5분 길이 권장
   - Unlisted 또는 Public으로 업로드

3. **도메인 소유권 인증**:
   - Google Search Console 인증 (이미 완료!)

### Step 3: 검토 기간
- **일반 범위**: 1-2일 소요
- **민감한 범위** (Calendar API 등): 4-6주 소요
- Google에서 추가 정보를 요청할 수 있음

---

## 5. 임시 해결책: 테스트 모드에서 사용

검토 기간 동안 사용할 수 있는 방법:

### 방법 1: 테스트 사용자 추가
위에서 설명한 대로 OAuth 동의 화면에서 테스트 사용자 추가

### 방법 2: 경고 무시하고 계속 진행
사용자가 경고 화면에서 **"고급" → "안전하지 않은 페이지로 이동"** 클릭하면 로그인 가능

---

## 6. 데모 영상 제작 가이드

Google이 요구하는 데모 영상 내용:

### 포함해야 할 내용
1. **앱 홈페이지** 화면
2. **로그인 버튼** 클릭
3. **Google OAuth 동의 화면** 표시
4. **권한 승인** (Calendar 접근 허용)
5. **로그인 후 기능 시연**:
   - 강사가 수업 만들기
   - Google Calendar와 연동
   - 수강생이 예약
   - 캘린더에 이벤트 추가 확인
6. **로그아웃**

### 촬영 팁
- 화면 녹화 도구 사용 (Mac: QuickTime, Windows: Xbox Game Bar)
- 음성 설명 추가 (선택사항)
- 영어 자막 추가 권장
- YouTube에 Unlisted로 업로드

---

## 7. 체크리스트

### 즉시 할 수 있는 것
- [x] Google Search Console 인증 완료
- [ ] OAuth 동의 화면 정보 업데이트
  - [ ] 앱 이름 확인
  - [ ] 홈페이지 URL 추가
  - [ ] 개인정보 처리방침 URL 추가
  - [ ] 서비스 약관 URL 추가
- [ ] 테스트 사용자 추가 (임시 해결)

### 프로덕션 인증을 위해 준비
- [ ] 앱 설명 작성 (Calendar API 사용 이유)
- [ ] 데모 영상 촬영 및 YouTube 업로드
- [ ] 도메인 소유권 인증 (Search Console 완료면 자동)
- [ ] Google에 인증 요청 제출
- [ ] 검토 완료 대기 (4-6주)

---

## 8. 자주 묻는 질문

### Q: 꼭 인증을 받아야 하나요?
**A**: 아니요. 테스트 모드로도 100명까지 사용 가능합니다. 하지만:
- 일반 사용자에게 경고 화면이 표시됨
- 신뢰도가 낮아 보일 수 있음
- 100명 이상 사용 시 반드시 필요

### Q: Calendar API는 꼭 필요한가요?
**A**: 예약 시스템의 핵심 기능이므로 필수입니다. 대신:
- Google Calendar 연동을 선택사항으로 만들기
- 자체 캘린더 시스템 구축

### Q: 검토가 거부되면 어떻게 하나요?
**A**: Google이 거부 이유를 알려줍니다. 수정 후 재신청 가능.

### Q: 개인 프로젝트도 인증받을 수 있나요?
**A**: 네, 개인 프로젝트도 인증 가능합니다. 단, 실제 작동하는 서비스여야 합니다.

---

## 다음 단계

1. **먼저 OAuth 동의 화면 업데이트** (5분)
2. **테스트 사용자 추가로 임시 해결** (1분)
3. **데모 영상 준비** (1-2시간)
4. **인증 요청 제출** (10분)
5. **검토 완료 대기** (4-6주)

---

완료! 🎉

이제 Google OAuth 인증 절차를 진행할 수 있습니다.
